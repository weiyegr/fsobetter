(function(A){"function"===typeof define&&define.amd?define(["jquery"],A):A(jQuery)})(function(H){var A=[],F=H(document),G=H.browser.msie&&6===parseInt(H.browser.version)&&"object"!==typeof window.XMLHttpRequest,E=H.browser.msie&&7===parseInt(H.browser.version),D=null,B=H(window),C=[];H.modal=function(J,I){return H.modal.impl.init(J,I)};H.modal.close=function(){H.modal.impl.close()};H.modal.focus=function(I){H.modal.impl.focus(I)};H.modal.setContainerDimensions=function(){H.modal.impl.setContainerDimensions()};H.modal.setPosition=function(){H.modal.impl.setPosition()};H.modal.update=function(J,I){H.modal.impl.update(J,I)};H.fn.modal=function(I){return H.modal.impl.init(this,I)};H.modal.defaults={appendTo:"body",focus:!0,opacity:50,overlayId:"simplemodal-overlay",overlayCss:{},containerId:"simplemodal-container",containerCss:{},dataId:"simplemodal-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:!1,autoPosition:!0,zIndex:1000,close:!0,closeHTML:'<a class="modalCloseImg" title="Close"></a>',closeClass:"simplemodal-close",escClose:!0,overlayClose:!1,fixed:!0,position:null,persist:!1,modal:!0,onOpen:null,onShow:null,onClose:null};H.modal.impl={d:{},init:function(J,I){if(this.d.data){return !1}D=H.browser.msie&&!H.support.boxModel;this.o=H.extend({},H.modal.defaults,I);this.zIndex=this.o.zIndex;this.occb=!1;if("object"===typeof J){if(J=J instanceof H?J:H(J),this.d.placeholder=!1,0<J.parent().parent().size()&&(J.before(H("<span></span>").attr("id","simplemodal-placeholder").css({display:"none"})),this.d.placeholder=!0,this.display=J.css("display"),!this.o.persist)){this.d.orig=J.clone(!0)}}else{if("string"===typeof J||"number"===typeof J){J=H("<div></div>").html(J)}else{return alert("SimpleModal Error: Unsupported data type: "+typeof J),this}}this.create(J);this.open();H.isFunction(this.o.onShow)&&this.o.onShow.apply(this,[this.d]);return this},create:function(I){this.getDimensions();if(this.o.modal&&G){this.d.iframe=H('<iframe src="javascript:false;"></iframe>').css(H.extend(this.o.iframeCss,{display:"none",opacity:0,position:"fixed",height:C[0],width:C[1],zIndex:this.o.zIndex,top:0,left:0})).appendTo(this.o.appendTo)}this.d.overlay=H("<div></div>").attr("id",this.o.overlayId).addClass("simplemodal-overlay").css(H.extend(this.o.overlayCss,{display:"none",opacity:this.o.opacity/100,height:this.o.modal?A[0]:0,width:this.o.modal?A[1]:0,position:"fixed",left:0,top:0,zIndex:this.o.zIndex+1})).appendTo(this.o.appendTo);this.d.container=H("<div></div>").attr("id",this.o.containerId).addClass("simplemodal-container").css(H.extend({position:this.o.fixed?"fixed":"absolute"},this.o.containerCss,{display:"none",zIndex:this.o.zIndex+2})).append(this.o.close&&this.o.closeHTML?H(this.o.closeHTML).addClass(this.o.closeClass):"").appendTo(this.o.appendTo);this.d.wrap=H("<div></div>").attr("tabIndex",-1).addClass("simplemodal-wrap").css({height:"100%",outline:0,width:"100%"}).appendTo(this.d.container);this.d.data=I.attr("id",I.attr("id")||this.o.dataId).addClass("simplemodal-data").css(H.extend(this.o.dataCss,{display:"none"})).appendTo("body");this.setContainerDimensions();this.d.data.appendTo(this.d.wrap);(G||D)&&this.fixIE()},bindEvents:function(){var I=this;H("."+I.o.closeClass).bind("click.simplemodal",function(J){J.preventDefault();I.close()});I.o.modal&&I.o.close&&I.o.overlayClose&&I.d.overlay.bind("click.simplemodal",function(J){J.preventDefault();I.close()});F.bind("keydown.simplemodal",function(J){I.o.modal&&9===J.keyCode?I.watchTab(J):I.o.close&&I.o.escClose&&27===J.keyCode&&(J.preventDefault(),I.close())});B.bind("resize.simplemodal orientationchange.simplemodal",function(){I.getDimensions();I.o.autoResize?I.setContainerDimensions():I.o.autoPosition&&I.setPosition();G||D?I.fixIE():I.o.modal&&(I.d.iframe&&I.d.iframe.css({height:C[0],width:C[1]}),I.d.overlay.css({height:A[0],width:A[1]}))})},unbindEvents:function(){H("."+this.o.closeClass).unbind("click.simplemodal");F.unbind("keydown.simplemodal");B.unbind(".simplemodal");this.d.overlay.unbind("click.simplemodal")},fixIE:function(){var I=this.o.position;H.each([this.d.iframe||null,!this.o.modal?null:this.d.overlay,"fixed"===this.d.container.css("position")?this.d.container:null],function(L,N){if(N){var J=N[0].style;J.position="absolute";if(2>L){J.removeExpression("height"),J.removeExpression("width"),J.setExpression("height",'document.body.scrollHeight > document.body.clientHeight ? document.body.scrollHeight : document.body.clientHeight + "px"'),J.setExpression("width",'document.body.scrollWidth > document.body.clientWidth ? document.body.scrollWidth : document.body.clientWidth + "px"')}else{var M,K;I&&I.constructor===Array?(M=I[0]?"number"===typeof I[0]?I[0].toString():I[0].replace(/px/,""):N.css("top").replace(/px/,""),M=-1===M.indexOf("%")?M+' + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"':parseInt(M.replace(/%/,""))+' * ((document.documentElement.clientHeight || document.body.clientHeight) / 100) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"',I[1]&&(K="number"===typeof I[1]?I[1].toString():I[1].replace(/px/,""),K=-1===K.indexOf("%")?K+' + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"':parseInt(K.replace(/%/,""))+' * ((document.documentElement.clientWidth || document.body.clientWidth) / 100) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"')):(M='(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"',K='(document.documentElement.clientWidth || document.body.clientWidth) / 2 - (this.offsetWidth / 2) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"');J.removeExpression("top");J.removeExpression("left");J.setExpression("top",M);J.setExpression("left",K)}}})},focus:function(J){var I=this,J=J&&-1!==H.inArray(J,["first","last"])?J:"first",K=H(":input:enabled:visible:"+J,I.d.wrap);setTimeout(function(){0<K.length?K.focus():I.d.wrap.focus()},10)},getDimensions:function(){var I="undefined"===typeof window.innerHeight?B.height():window.innerHeight;A=[F.height(),F.width()];C=[I,B.width()]},getVal:function(J,I){return J?"number"===typeof J?J:"auto"===J?0:0<J.indexOf("%")?parseInt(J.replace(/%/,""))/100*("h"===I?C[0]:C[1]):parseInt(J.replace(/px/,"")):null},update:function(J,I){if(!this.d.data){return !1}this.d.origHeight=this.getVal(J,"h");this.d.origWidth=this.getVal(I,"w");this.d.data.hide();J&&this.d.container.css("height",J);I&&this.d.container.css("width",I);this.setContainerDimensions();this.d.data.show();this.o.focus&&this.focus();this.unbindEvents();this.bindEvents()},setContainerDimensions:function(){var N=G||E,J=this.d.origHeight?this.d.origHeight:H.browser.opera?this.d.container.height():this.getVal(N?this.d.container[0].currentStyle.height:this.d.container.css("height"),"h"),N=this.d.origWidth?this.d.origWidth:H.browser.opera?this.d.container.width():this.getVal(N?this.d.container[0].currentStyle.width:this.d.container.css("width"),"w"),O=this.d.data.outerHeight(!0),I=this.d.data.outerWidth(!0);this.d.origHeight=this.d.origHeight||J;this.d.origWidth=this.d.origWidth||N;var M=this.o.maxHeight?this.getVal(this.o.maxHeight,"h"):null,K=this.o.maxWidth?this.getVal(this.o.maxWidth,"w"):null,M=M&&M<C[0]?M:C[0],K=K&&K<C[1]?K:C[1],L=this.o.minHeight?this.getVal(this.o.minHeight,"h"):"auto",J=J?this.o.autoResize&&J>M?M:J<L?L:J:O?O>M?M:this.o.minHeight&&"auto"!==L&&O<L?L:O:L,M=this.o.minWidth?this.getVal(this.o.minWidth,"w"):"auto",N=N?this.o.autoResize&&N>K?K:N<M?M:N:I?I>K?K:this.o.minWidth&&"auto"!==M&&I<M?M:I:M;this.d.container.css({height:J,width:N});this.d.wrap.css({overflow:O>J||I>N?"auto":"visible"});this.o.autoPosition&&this.setPosition()},setPosition:function(){var J,I;J=C[0]/2-this.d.container.outerHeight(!0)/2;I=C[1]/2-this.d.container.outerWidth(!0)/2;var K="fixed"!==this.d.container.css("position")?B.scrollTop():0;this.o.position&&"[object Array]"===Object.prototype.toString.call(this.o.position)?(J=K+(this.o.position[0]||J),I=this.o.position[1]||I):J=K+J;this.d.container.css({left:I,top:J})},watchTab:function(I){if(0<H(I.target).parents(".simplemodal-container").length){if(this.inputs=H(":input:enabled:visible:first, :input:enabled:visible:last",this.d.data[0]),!I.shiftKey&&I.target===this.inputs[this.inputs.length-1]||I.shiftKey&&I.target===this.inputs[0]||0===this.inputs.length){I.preventDefault(),this.focus(I.shiftKey?"last":"first")}}else{I.preventDefault(),this.focus()}},open:function(){this.d.iframe&&this.d.iframe.show();H.isFunction(this.o.onOpen)?this.o.onOpen.apply(this,[this.d]):(this.d.overlay.show(),this.d.container.show(),this.d.data.show());this.o.focus&&this.focus();this.bindEvents()},close:function(){if(!this.d.data){return !1}this.unbindEvents();if(H.isFunction(this.o.onClose)&&!this.occb){this.occb=!0,this.o.onClose.apply(this,[this.d])}else{if(this.d.placeholder){var I=H("#simplemodal-placeholder");this.o.persist?I.replaceWith(this.d.data.removeClass("simplemodal-data").css("display",this.display)):(this.d.data.hide().remove(),I.replaceWith(this.d.orig))}else{this.d.data.hide().remove()}this.d.container.hide().remove();this.d.overlay.hide();this.d.iframe&&this.d.iframe.hide().remove();this.d.overlay.remove();this.d={}}}}});function wp_confirm(H,C,F){if($("#wp-confirmpnl_overlay,#wp-confirm_panel").size()){return}var E=286,G="",A='<div id="wp-confirmpnl_overlay"></div>';G='<div id="wp-confirm_panel" class="overz wp-manage_panel wp-alert-panel" style="position:absolute;width:'+E+'px;z-index:10001;"><div class="wp-panel_outpadding overz"><div class="wp-manage_panel_block_one wp-manage-link overz"><h2 class="overz">'+H+'</h2></div><div class="wp-alert_button overz"><a href="javascript:;" class="wp-alert-sure">'+translate("Sure")+'</a><a href="javascript:;" class="wp-alert-cancel">'+translate("Cancel")+"</a></div></div></div>";$(A+G).appendTo("body");var B=$("#wp-confirm_panel");var D=setTimeout(function(){var I=B.find(".wp-alert_button");I.width(I.outerWidth())},30);panel_position(B,E,"auto",true,"wp-confirmpnl_overlay");$(window).resize(function(){panel_position(B,E,"auto",true,"wp-confirmpnl_overlay")});B.bind("rename",function(I,J){if(J.length){var P=this;if(J.match(/,/)){var N='<a href="javascript:;" class="wp-alert-sure">'+translate("Sure")+'</a><a href="javascript:;" style="margin-right:10px" class="wp-alert-edit">'+translate("Edit")+'</a><a href="javascript:;" class="wp-alert-cancel">'+translate("Cancel")+"</a>";var K=H.match(/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?/);K=K[0];var M=J.split(",")[1];var L=J.split(",")[0];$(".wp-alert_button",P).html(N);$("a.wp-alert-edit",P).html(M);$("a.wp-alert-sure",P).html(L);$("a.wp-alert-edit",P).css("background","url(../images/wp-button-black-bg.gif) repeat-x #383838");$("a.wp-alert-edit",P).hover(function(){$("a.wp-alert-sure",P).css("background","url(../images/wp-button-black-bg.gif) repeat-x #383838");$("a.wp-alert-edit",P).css({"color":"#FFF","background":"url(../images/wp-button-bg-hover.gif) repeat-x #366bbc"});$("a.wp-alert-cancel",P).css("background","url(../images/wp-button-black-bg.gif) repeat-x #383838")});$("a.wp-alert-sure",P).hover(function(){$("a.wp-alert-edit",P).css("background","url(../images/wp-button-black-bg.gif) repeat-x #383838");$("a.wp-alert-sure",P).css({"color":"#FFF","background":"url(../images/wp-button-bg-hover.gif) repeat-x #366bbc"});$("a.wp-alert-cancel",P).css("background","url(../images/wp-button-black-bg.gif) repeat-x #383838")});$("a.wp-alert-cancel",P).hover(function(){$("a.wp-alert-cancel",P).css({"color":"#FFF","background":"url(../images/wp-button-bg-hover.gif) repeat-x #366bbc"});$("a.wp-alert-sure",P).css("background","url(../images/wp-button-black-bg.gif) repeat-x #383838");$("a.wp-alert-edit",P).css("background","url(../images/wp-button-black-bg.gif) repeat-x #383838")});var O=setTimeout(function(){var Q=$("a.wp-alert-edit",P).outerWidth(true)+$("a.wp-alert-sure",P).outerWidth(true)+$("a.wp-alert-cancel",P).outerWidth(true);$(".wp-alert_button",P).width(Q);Q=null;clearTimeout(O)},50);B.find("a.wp-alert-sure").click(function(Q){if(C&&$.isFunction(C)){C()}B.add("#wp-confirmpnl_overlay").remove();if(D){clearTimeout(D)}Q.preventDefault()}).end().find("a.wp-alert-cancel").click(function(Q){if(F&&$.isFunction(F)){F()}B.add("#wp-confirmpnl_overlay").remove();if(D){clearTimeout(D)}Q.preventDefault()}).end().find("a.wp-alert-edit").click(function(Q){if(K){window.location.href=K}})}else{$("a.wp-alert-sure",P).html(J);var O=setTimeout(function(){var Q=$("a.wp-alert-sure",P).outerWidth(true)+$("a.wp-alert-cancel",P).outerWidth(true);$(".wp-alert_button",P).width(Q);Q=null;clearTimeout(O)},50)}}});B.find("a.wp-alert-sure").click(function(I){if(C&&$.isFunction(C)){C()}B.add("#wp-confirmpnl_overlay").remove();if(D){clearTimeout(D)}I.preventDefault()}).end().find("a.wp-alert-cancel").click(function(I){if(F&&$.isFunction(F)){F()}B.add("#wp-confirmpnl_overlay").remove();if(D){clearTimeout(D)}I.preventDefault()});$(document).keydown(function(I){if(I.keyCode==13){B.find("a.wp-alert-sure").trigger("click")}});return false}function wp_editPicOnline(C){var A=parseInt(getImageProcessType())||0;var D=["feather","xiuxiu"];if(A>=D.length){A=0}var B=D[A];$LAB.script(relativeToAbsoluteURL("script/wopop2_"+B+".js")).wait(function(){wp_editPicOnlineActual(C)})}function wp_alert(F,A){if($("#wp-alertpnl_overlay,#wp-alert_panel").size()){return}var E=286,D="",B='<div id="wp-alertpnl_overlay"></div>';D='<div id="wp-alert_panel" class="overz wp-manage_panel wp-alert-panel" style="position:absolute;width:'+E+'px;z-index:10001;"><div class="wp-panel_outpadding overz"><div class="wp-manage_panel_block_one wp-manage-link overz"><h2 class="overz">'+F+'</h2></div><div class="wp-alert_button overz" style="width:55px;"><a href="javascript:;" class="wp-alert-sure">'+translate("Sure")+"</a></div></div></div>";$(B+D).appendTo("body");var C=$("#wp-alert_panel");panel_position(C,E,"auto",true,"wp-alertpnl_overlay");$(window).resize(function(){panel_position(C,E,"auto",true,"wp-alertpnl_overlay")});C.find("a.wp-alert-sure").click(function(G){C.add("#wp-alertpnl_overlay").remove();if($.isFunction(A)){A()}G.preventDefault()});$(document).keydown(function(G){if(G.keyCode==13){C.find("a.wp-alert-sure").trigger("click")}});return false}function show_dialog(A,E,F,B,D,C){var G=$.extend({},{open:function(H){},close:function(H){}},D||{});$("#osx-modal-content").modal({overlayId:"osx-overlay",containerId:"osx-container",closeHTML:null,zIndex:1000,opacity:25,onOpen:function(I){G.open(I);var J=this,M=I.container,K=M[0];var H=$("#osx-modal-data",K);if(C=="iframe"){H.html('<iframe src="'+A+'" frameborder="0" width="'+F+'" onload="this.height=this.contentWindow.document.documentElement.scrollHeight" scrolling="no"></iframe>');I.overlay.show();H.show();$("#osx-modal-content,div.close",K).show();$("#osx-modal-title",K).html(E).show();M.fadeTo("fast",1).draggable({handle:"#osx-modal-title",cursor:"move"})}else{var L=$("#wp-ajaxsend_loading2"),N=$(window);if(L.size()==0){$('<div id="wp-ajaxsend_loading2" style="width:'+N.width()+"px;height:"+N.height()+'px;z-index:9999;"><img src="'+relativeToAbsoluteURL("template/default/images/loading.gif")+'" width="16" height="16" /></div>').appendTo("body")}$.get(A,function(O){H.html(O);I.overlay.show();H.show();$("#osx-modal-content,div.close",K).show();$("#osx-modal-title",K).html(E).show();M.fadeTo("fast",1).draggable({handle:"#osx-modal-title",cursor:"move"});J.setPosition();$("#wp-ajaxsend_loading2").remove()}).error(function(){$("#wp-ajaxsend_loading2").remove();alert(translate("Request failed!"));J.close();return})}if(F>0){M.css("width",F)}M.css("height",B||"");$("#osx-modal-content").bind("add_loading",function(){var O=H.children(".loading");if(O.size()){O.remove()}$('<div class="loading" style="width:'+H.width()+"px;height:"+H.outerHeight()+'px;z-index:9999;"><img src="'+relativeToAbsoluteURL("template/default/images/loading.gif")+'" width="16" height="16" /></div>').appendTo(H)})},onClose:function(H){G.close(H);var I=this;H.container.hide();H.overlay.hide();$("#osx-modal-content").triggerHandler("dialogclose",H);$("#osx-modal-content").unbind("dialogclose");$("#osx-modal-content").unbind("add_loading");setTimeout(function(){I.close()},500)}})}function get_plugin_css(tagid,css){var editmode=false;if($.saveLayout){editmode=true}var setcss=$("#page_set_css").html();setcss=setcss.replace(/<style>/ig,"").replace(/<\/style>/ig,"").replace(/[\r]/g," ").replace(/[\n]/g," ").replace(/[\r\n]/g," ").replace(/\s+/g," ");var reg=eval("/\\/\\*"+tagid+"\\*\\/(.*)\\/\\*"+tagid+"\\*\\//ig");setcss=setcss.replace(reg,"");if(setcss&&$.trim(setcss)!=""){css=css.replace(/@charset [^;]+;/i,"")}var tempcss=setcss+" /*"+tagid+"*/ "+css+" /*"+tagid+"*/ ";tempcss=tempcss.replace(/&gt;/ig,">");if(editmode){$("#page_set_css").html("<style> "+tempcss+"</style>")}else{$("#page_set_css").after($("#page_set_css").clone().attr("id","page_set_css2").html("<style> "+tempcss+"</style>"));$("#page_set_css").html("").remove();$("#page_set_css2").attr("id","page_set_css")}}(function(F,A){var B={};var G={};F.modplugin={addCallBack:function(I,K,J){if(F.isFunction(J)){if(!B[I]){B[I]={}}B[I][K]=J}},fireCallBack:function(I,L,K,M){var J=B[I];if(!J){return false}J=J[L];if(F.isFunction(J)){return J(K,M)}else{return false}}};F.fn.execPluginCallBack=function(I,J){return F.modplugin.fireCallBack(this.attr("type"),I,this,J)};F.fn.mod_property=function(I,L){if(F.isPlainObject(I)){for(var J in I){this.mod_property(J,I[J])}return}var M=this.prop("id");if(!M){return null}var K=G[M];if(!K){G[M]=K={}}if(L!==A){K[I]=L;return L}else{return K[I]}};var D=null;function H(){if(D){return}D=Undo.Command.createModuleCommand(function(I,K){var J=F("#"+I);if(K.propval!=A){J.mod_property(K.propkey,K.propval)}else{J.del_mod_property(K.propkey)}J.execPluginCallBack("property_undo",K)},null,{returntype:"class"})}var E=null;function C(){if(E){return}E=Undo.Command.createModuleCommand(function(I,K){var J=F("#"+I);G[I]=K.propval;J.execPluginCallBack("property_undo",K)},null,{returntype:"class"})}F.fn.autoundo_mod_property2=function(L){if(L===A){return this.get_mod_property()}C();var K=this.get_mod_property();G[this.attr("id")]=L;var J={propval:K,act:"set",cmdtype:"undo"};var I={propval:L,act:"set",cmdtype:"redo"};if(!Undo.Command.DefaultEqAct(K,L)){new E(this.attr("id")).insertWithVals(J,I)}};F.fn.autoundo_mod_property=function(I,M){if(M===A){return this.mod_property(I)}H();var L=this.mod_property(I);this.mod_property(I,M);var K={propkey:I,propval:L,act:"set",cmdtype:"undo"};var J={propkey:I,propval:M,act:"set",cmdtype:"redo"};if(!Undo.Command.DefaultEqAct(L,M)){new D(this.attr("id")).insertWithVals(K,J)}};F.fn.autoundo_del_mod_property=function(I){H();var K=this.mod_property(I);this.del_mod_property(I);var J={propkey:I,propval:K,act:"del",cmdtype:"undo"};var L={propkey:I,act:"del",cmdtype:"redo"};if(K!=A){new D(this.attr("id")).insertWithVals(J,L)}};F.fn.del_mod_property=function(I){var L=this.prop("id");if(!L){return null}var J=G[L];if(F.isPlainObject(J)){var K=J[I];delete J[I];return K}};F.fn.get_mod_property=function(){var J=this.prop("id");if(!J){return null}var I=G[J];return I||{}}})(jQuery);